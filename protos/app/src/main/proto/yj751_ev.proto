syntax = "proto3";

message InstallmentPaymentServeBelone {
  SERVE_MIDDLEMEN serve_middlemen = 1;

  INSTALLMENT_PAYMENT_OVERDUE_LIMIT installment_payment_overdue_limit = 2;

  INSTALLMENT_PAYMENT_STATE installment_payment_state = 3;
}

message InstallmentPaymentServe {
  INSTALLMENT_PAYMENT_STATE installment_payment_state = 1;

  uint32 installment_payment_start_utc_time = 2;

  uint32 installment_payment_overdue_limit_utc_time = 3;
}

message ResetMiddlemenDeliverySetting {
  SERVE_MIDDLEMEN serve_middlemen = 1;
}

message CfgTouStrategy {
  repeated uint32 tou_hours_strategy = 1;

  uint32 tou_gird_chg_stop_soc = 2;
}

message CfgGridPrice {
  uint32 timestamp = 1;
}

message CfgEnergyStrategyOperateMode {
  bool operate_self_powered_open = 1;

  bool operate_scheduled_open = 2;

  bool operate_tou_mode_open = 3;
}

message TimeTaskParamDetail {
  TIME_TASK_DETAIL_TYPE type = 1;

  float val = 2;
}

message TimeTaskItemV2 {
  uint32 task_index = 1;

  bool is_cfg = 2;

  bool is_enable = 3;

  uint32 conflict_flag = 4;

  TIME_TASK_MODE time_mode = 5;

  uint32 time_param = 6;

  uint32 time_table = 7;

  TIME_TASK_TYPE task_type = 8;

  uint32 task_param = 9;

  repeated TimeTaskParamDetail task_param_detail = 10;
}

message TimeTaskItemV2List {
  repeated TimeTaskItemV2 time_task = 1;
}

message ResvInfo {
  repeated uint32 resv_info = 1;
}

message ConfigWrite {
  optional uint32 cfg_ev_chg_amp_max = 35;

  optional EV_CHG_MODE cfg_ev_chg_mode = 36;

  optional uint32 cfg_ev_chg_soc_min = 37;

  optional bool cfg_ev_chg_manual_ctrl = 38;

  optional CfgTouStrategy cfg_tou_hours_strategy = 65;

  optional CfgGridPrice cfg_grid_price = 101;

  optional uint32 cfg_backup_reverse_soc = 102;

  optional CfgEnergyStrategyOperateMode cfg_energy_strategy_operate_mode = 106;

  optional bool cfg_installment_payment_serve_enable = 119;

  optional InstallmentPaymentServeBelone cfg_installment_payment_serve_belone = 120;

  optional InstallmentPaymentServe cfg_installment_payment_serve = 121;

  optional ResetMiddlemenDeliverySetting reset_middlemen_delivery_setting = 124;

  optional TimeTaskItemV2 cfg_time_task_v2_item = 127;

  optional bool unlock_pv_weak = 167;
}

message ConfigWriteAck {
  uint32 action_id = 1;

  bool config_ok = 2;
}

message ConfigRead {
  repeated uint32 action_id = 1;
}

message ConfigReadAck {
  optional TimeTaskItemV2List read_time_task_v2_list = 129;
}

message DisplayPropertyUpload {
  optional uint32 plug_in_info_pv_h_flag = 39;

  optional uint32 plug_in_info_pv_h_type = 40;

  optional float pow_get_pv_h = 35;

  optional uint32 plug_in_info_pv_l_flag = 42;

  optional uint32 plug_in_info_pv_l_type = 43;

  optional float pow_get_pv_l = 36;

  optional uint32 plug_in_info_5p8_flag = 63;

  optional uint32 plug_in_info_5p8_type = 64;

  optional uint32 plug_in_info_5p8_detail = 65;

  optional string plug_in_info_5p8_sn = 193;

  optional uint32 plug_in_info_acp_run_state = 116;

  optional uint32 plug_in_info_acp_err_code = 117;

  optional uint32 plug_in_info_acp_firm_ver = 118;

  optional ResvInfo plug_in_info_acp_resv = 119;

  optional float cms_batt_soc = 262;

  optional uint32 cms_max_chg_soc = 270;

  optional uint32 cms_min_dsg_soc = 271;

  optional uint32 cms_batt_pow_out_max = 459;

  optional uint32 cms_batt_pow_in_max = 460;

  optional uint32 backup_reverse_soc = 461;

  optional uint32 cms_batt_full_energy = 462;

  optional uint32 ev_chg_amp_max = 538;

  optional EV_CHG_MODE ev_chg_mode = 539;

  optional uint32 ev_chg_soc_min = 540;

  optional bool ev_chg_manual_ctrl = 541;

  optional bool installment_payment_serve_enable = 591;

  optional SERVE_MIDDLEMEN serve_middlemen = 592;

  optional INSTALLMENT_PAYMENT_OVERDUE_LIMIT installment_payment_overdue_limit = 593;

  optional INSTALLMENT_PAYMENT_STATE installment_payment_state = 594;

  optional uint32 installment_payment_start_utc_time = 595;

  optional uint32 installment_payment_overdue_limit_utc_time = 596;

  optional uint32 plug_in_info_pv_vol_low_flag = 1264;

  optional uint32 plug_in_info_pv_weak_source_flag = 1265;
}

message ReqTouStrategy {
  uint32 req_state = 1;
}

message DevRequest {
  uint32 dev_utc_time = 1;

  float dev_utc_timezone = 2;

  optional ReqTouStrategy require_tou_strategy = 4;
}

message DevRequestAck {
  uint32 request_id = 1;

  uint32 require_ok = 2;
}

enum SERVE_MIDDLEMEN {
  SERVE_MIDDLEMEN_NONE = 0;

  SERVE_MIDDLEMEN_SUNNOVA = 1;
}

enum INSTALLMENT_PAYMENT_STATE {
  INSTALLMENT_PAYMENT_STATE_WAIT_FOT_ACTIVATE = 0;

  INSTALLMENT_PAYMENT_STATE_ACTIVATED = 1;

  INSTALLMENT_PAYMENT_STATE_OVERDUE = 2;

  INSTALLMENT_PAYMENT_STATE_SETTLE = 3;

  INSTALLMENT_PAYMENT_STATE_MANUAL_LOCKDOWN = 4;
}

enum INSTALLMENT_PAYMENT_OVERDUE_LIMIT {
  INSTALLMENT_PAYMENT_OVERDUE_LIMIT_NONE = 0;

  INSTALLMENT_PAYMENT_OVERDUE_LIMIT_CLOSE_OUTPUT = 1;
}

enum TIME_TASK_MODE {
  TIME_TASK_MODE_RESV = 0;

  TIME_TASK_MODE_PER_WEEK = 1;

  TIME_TASK_MODE_ONCE = 2;
}

enum TIME_TASK_TYPE {
  TIME_TASK_TYPE_AC_CHG = 0;

  TIME_TASK_TYPE_AC_DSG = 1;

  TIME_TASK_TYPE_AC2_DSG = 2;

  TIME_TASK_TYPE_DC_CHG = 3;

  TIME_TASK_TYPE_DC2_CHG = 4;

  TIME_TASK_TYPE_DC_DSG = 5;

  TIME_TASK_TYPE_OIL_ON = 6;

  TIME_TASK_TYPE_OIL_OFF = 7;

  TIME_TASK_TYPE_USB_CHG = 8;

  TIME_TASK_TYPE_USB_DSG = 9;

  TIME_TASK_TYPE_AC_BYPASS = 10;

  TIME_TASK_TYPE_AC_DSG_ONLY = 11;

  TIME_TASK_TYPE_SHARING_SOC = 12;

  TIME_TASK_TYPE_POWER_ON = 13;

  TIME_TASK_TYPE_POWER_OFF = 14;

  TIME_TASK_TYPE_THERMOSTATIC = 15;

  TIME_TASK_TYPE_COOLING = 16;

  TIME_TASK_TYPE_HEATING = 17;

  TIME_TASK_TYPE_VENTING = 18;

  TIME_TASK_TYPE_DEHUMIDIFYING = 19;

  TIME_TASK_TYPE_LOAD_CTRL_OFF = 20;

  TIME_TASK_TYPE_LOAD_CTRL_ON = 21;

  TIME_TASK_TYPE_LOAD_CTRL_GRID = 22;

  TIME_TASK_TYPE_LOAD_CTRL_BACKUP = 23;

  TIME_TASK_TYPE_AC_DSG_SELF = 24;

  TIME_TASK_TYPE_EV_CHG = 25;
}

enum TIME_TASK_DETAIL_TYPE {
  TIME_TASK_DETAIL_IDLE = 0;

  TIME_TASK_DETAIL_POW = 1;

  TIME_TASK_DETAIL_TEMP = 2;

  TIME_TASK_DETAIL_LEVEL = 3;
}

enum EV_CHG_MODE {
  EV_CHG_MODE_NULL = 0;

  EV_CHG_MODE_REDUNDANCY_PV = 1;

  EV_CHG_MODE_ENERGY_SAVE = 2;

  EV_CHG_MODE_PLUG_PLAY = 3;
}
