syntax = "proto3";

package ecoflow.common.proto.Bk622Common;

message EventPush {
  uint32 event_ver = 1;

  uint32 event_seq = 2;

  repeated LogItem event_item = 3;

  message LogItem {
    uint32 unix_time = 1;

    uint32 ms = 2;

    uint32 event_no = 3;

    repeated float event_detail = 4;
  }
}

message EventAck {
  uint32 result = 1;

  uint32 event_seq = 2;

  uint32 event_item_num = 3;
}

message DevErrcodeList {
  repeated uint32 dev_errcode = 1;
}

message PropertyUploadPeriod {
  int32 display_property_full_upload_period = 1;

  int32 display_property_incremental_upload_period = 2;

  int32 runtime_property_full_upload_period = 3;

  int32 runtime_property_incremental_upload_period = 4;
}

message GridConnectionDataRecord {
  float today_active_L1 = 1;

  float today_active_L2 = 2;

  float today_active_L3 = 3;

  float today_active = 4;

  float today_reactive = 5;

  float total_reactive_energy = 6;

  float total_active_energy = 7;
}

message ConfigWrite {
  optional bool cfg_power_off = 3;

  optional bool cfg_power_on = 4;

  optional uint32 reset_factory_setting = 5;

  optional uint32 cfg_utc_time = 6;

  optional int32 cfg_utc_timezone = 7;

  optional int32 cfg_display_property_full_upload_period = 67;

  optional int32 cfg_display_property_incremental_upload_period = 68;

  optional int32 cfg_runtime_property_full_upload_period = 69;

  optional int32 cfg_runtime_property_incremental_upload_period = 70;

  optional bool active_display_property_full_upload = 71;

  optional bool active_runtime_property_full_upload = 72;

  optional string cfg_utc_timezone_id = 135;

  optional bool cfg_utc_set_mode = 136;

  optional string cfg_country_code = 211;

  optional uint32 cfg_town_code = 212;

  optional bool cfg_factory_mode_enable = 222;

  optional bool cfg_debug_mode_enable = 223;
}

message ConfigWriteAck {
  uint32 action_id = 1;

  bool config_ok = 2;

  optional bool cfg_power_off = 3;

  optional bool cfg_power_on = 4;

  optional uint32 reset_factory_setting = 5;

  optional uint32 cfg_utc_time = 6;

  optional int32 cfg_utc_timezone = 7;

  optional int32 cfg_display_property_full_upload_period = 67;

  optional int32 cfg_display_property_incremental_upload_period = 68;

  optional int32 cfg_runtime_property_full_upload_period = 69;

  optional int32 cfg_runtime_property_incremental_upload_period = 70;

  optional bool active_display_property_full_upload = 71;

  optional bool active_runtime_property_full_upload = 72;

  optional string cfg_utc_timezone_id = 135;

  optional bool cfg_utc_set_mode = 136;

  optional string cfg_country_code = 211;

  optional uint32 cfg_town_code = 212;

  optional bool cfg_factory_mode_enable = 222;

  optional bool cfg_debug_mode_enable = 223;
}

message ConfigRead {
  repeated uint32 action_id = 1;
}

message ConfigReadAck {
  optional uint32 cfg_utc_time = 6;

  optional int32 cfg_utc_timezone = 7;

  optional string cfg_utc_timezone_id = 135;
}

message DisplayPropertyUpload {
  optional string country_code = 728;

  optional uint32 town_code = 729;

  optional bool factory_mode_enable = 732;

  optional bool debug_mode_enable = 733;

  optional int32 utc_timezone = 133;

  optional string utc_timezone_id = 134;

  optional bool utc_set_mode = 135;

  optional DevErrcodeList dev_errcode_list = 627;

  optional float pow_get_sys_grid = 515;

  optional float temp_ambient = 484;

  optional float grid_connection_vol_L1 = 956;

  optional float grid_connection_vol_L2 = 957;

  optional float grid_connection_vol_L3 = 771;

  optional float grid_connection_amp_L1 = 958;

  optional float grid_connection_amp_L2 = 959;

  optional float grid_connection_amp_L3 = 784;

  optional float grid_connection_power = 616;

  optional float grid_connection_power_L1 = 962;

  optional float grid_connection_power_L2 = 963;

  optional float grid_connection_power_L3 = 772;

  optional float grid_connection_reactive_power = 617;

  optional float grid_connection_power_factor = 618;

  optional PANEL_GRID_STA grid_connection_sta = 619;

  optional GridConnectionDataRecord grid_connection_data_record = 773;

  optional bool grid_connection_flag_L1 = 762;

  optional bool grid_connection_flag_L2 = 763;

  optional bool grid_connection_flag_L3 = 764;

  optional float module_wifi_snr = 601;

  optional float module_wifi_rssi = 602;
}

message RuntimePropertyUpload {
  optional int32 display_property_full_upload_period = 293;

  optional int32 display_property_incremental_upload_period = 294;

  optional int32 runtime_property_full_upload_period = 295;

  optional int32 runtime_property_incremental_upload_period = 296;
}

message DevRequest {
  uint32 dev_utc_time = 1;

  float dev_utc_timezone = 2;

  optional bool require_property_upload_period = 3;

  optional bool require_time_service = 5;
}

message DevRequestAck {
  uint32 request_id = 1;

  uint32 require_ok = 2;

  optional PropertyUploadPeriod property_upload_period = 3;
}

enum PANEL_GRID_STA {
  PANEL_GRID_STA_NO_VAILD = 0;

  PANEL_GRID_IN = 1;

  PANEL_GRID_NOT_ONLINE = 2;

  PANEL_FEED_GRID = 3;
}
